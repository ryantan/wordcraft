# Story 6.3: Create Story Narrative Content

## Status

Draft

## Story

**As a** content creator,
**I want** to write simple, engaging narrative text for each story checkpoint,
**so that** children feel part of a larger adventure.

## Acceptance Criteria

1. Narrative content is written for: intro, 3-4 checkpoints, finale
2. Each narrative segment is 1-3 sentences, age-appropriate, and encouraging
3. Content reinforces the learning theme (e.g., "You've mastered 5 words! The treasure map reveals the next location...")
4. Tone is positive, adventurous, and celebrates progress
5. Content is stored in a configuration file `/lib/story/content.ts`
6. Content is easily editable and supports future theme variations
7. Content avoids gender-specific pronouns (uses "you" or "the explorer")
8. Content is reviewed for age-appropriateness and clarity

## Tasks / Subtasks

- [ ] Create story content configuration file (AC: 5)
  - [ ] Create directory `/lib/story/`
  - [ ] Create file `content.ts`
  - [ ] Define TypeScript interface for story content structure
  - [ ] Setup content export with proper typing

- [ ] Write intro narrative (AC: 1, 2, 4, 7)
  - [ ] Write opening scene narrative (space theme example):
    - "Welcome, Space Explorer! Your mission is to collect word treasures across the galaxy. Each word you master will reveal new planets to explore!"
  - [ ] Keep to 2-3 sentences maximum
  - [ ] Use inclusive language ("you", "explorer", "hero")
  - [ ] Make it exciting and inviting
  - [ ] Avoid gender-specific pronouns

- [ ] Write checkpoint 1 narrative (AC: 1, 2, 3, 4, 7)
  - [ ] Celebrate first milestone (after ~5 games)
  - [ ] Example: "Amazing work! You've landed on the Moon and mastered your first set of words. The stars are calling ‚Äì keep going!"
  - [ ] Acknowledge progress made
  - [ ] Encourage continuation
  - [ ] Keep positive and brief

- [ ] Write checkpoint 2 narrative (AC: 1, 2, 3, 4, 7)
  - [ ] Celebrate midpoint progress (after ~10 games)
  - [ ] Example: "Incredible! You've reached Mars with 10 words mastered. The asteroid belt is just ahead ‚Äì you're halfway to your goal!"
  - [ ] Reference specific progress (number of words)
  - [ ] Build excitement for next phase
  - [ ] Maintain encouraging tone

- [ ] Write checkpoint 3 narrative (AC: 1, 2, 3, 4, 7)
  - [ ] Celebrate near-completion (after ~15 games)
  - [ ] Example: "You're unstoppable! Jupiter's moons are behind you, and you've conquered 15 words. The final frontier awaits!"
  - [ ] Emphasize how far they've come
  - [ ] Create anticipation for finale
  - [ ] Use empowering language

- [ ] Write finale narrative (AC: 1, 2, 3, 4, 7)
  - [ ] Celebrate full completion
  - [ ] Example: "Mission Complete, Space Explorer! You've traveled across the galaxy and mastered all your words. You're a true Word Champion! Ready for your next adventure?"
  - [ ] Provide strong sense of accomplishment
  - [ ] Open door to continued learning
  - [ ] Make child feel proud

- [ ] Implement content structure (AC: 5, 6)
  - [ ] Create content configuration:
    ```typescript
    export interface StoryCheckpoint {
      id: string
      title: string
      narrative: string
      celebrationEmoji?: string
    }

    export interface StoryThemeContent {
      themeName: string
      intro: StoryCheckpoint
      checkpoints: StoryCheckpoint[]
      finale: StoryCheckpoint
    }

    export const STORY_THEMES: Record<string, StoryThemeContent> = {
      space: {
        themeName: 'Space Adventure',
        intro: {
          id: 'intro',
          title: 'Begin Your Journey',
          narrative: 'Welcome, Space Explorer! Your mission is to collect word treasures across the galaxy. Each word you master will reveal new planets to explore!',
          celebrationEmoji: 'üöÄ'
        },
        checkpoints: [
          {
            id: 'checkpoint1',
            title: 'Moon Landing',
            narrative: 'Amazing work! You\'ve landed on the Moon and mastered your first set of words. The stars are calling ‚Äì keep going!',
            celebrationEmoji: 'üåô'
          },
          {
            id: 'checkpoint2',
            title: 'Mars Mission',
            narrative: 'Incredible! You\'ve reached Mars with 10 words mastered. The asteroid belt is just ahead ‚Äì you\'re halfway to your goal!',
            celebrationEmoji: 'üî¥'
          },
          {
            id: 'checkpoint3',
            title: 'Jupiter Journey',
            narrative: 'You\'re unstoppable! Jupiter\'s moons are behind you, and you\'ve conquered 15 words. The final frontier awaits!',
            celebrationEmoji: 'ü™ê'
          }
        ],
        finale: {
          id: 'finale',
          title: 'Mission Complete',
          narrative: 'Mission Complete, Space Explorer! You\'ve traveled across the galaxy and mastered all your words. You\'re a true Word Champion! Ready for your next adventure?',
          celebrationEmoji: '‚≠ê'
        }
      }
    }
    ```

- [ ] Create alternative theme content (AC: 6)
  - [ ] Add placeholder for "treasure" theme
  - [ ] Add placeholder for "fantasy" theme
  - [ ] Document how to add new themes
  - [ ] Structure allows easy theme switching

- [ ] Review content for age-appropriateness (AC: 2, 8)
  - [ ] Reading level check: appropriate for 5-10 age range
  - [ ] Vocabulary check: simple, clear words
  - [ ] Sentence structure: short, easy to understand
  - [ ] Emotional tone: positive and encouraging
  - [ ] Cultural sensitivity: inclusive and welcoming

- [ ] Create helper functions
  - [ ] Create `getStoryContent(theme: string)` function
  - [ ] Create `getCheckpointNarrative(theme: string, checkpoint: number)` function
  - [ ] Add validation for theme existence
  - [ ] Export content getters

- [ ] Add content customization support
  - [ ] Support for dynamic word count insertion
  - [ ] Template variables: `{wordCount}`, `{checkpointNumber}`
  - [ ] Example: "You've mastered {wordCount} words!"
  - [ ] Create template interpolation function

- [ ] Create content tests
  - [ ] Create test file `/lib/story/content.test.ts`
  - [ ] Test: All themes have complete content (intro, checkpoints, finale)
  - [ ] Test: Content retrieval functions work
  - [ ] Test: Template interpolation works
  - [ ] Test: No gender-specific pronouns in content
  - [ ] Run tests with `npm run test`

## Dev Notes

### Architecture Context

**Content Structure Pattern:**
[Source: docs/ui-architecture.md#Story Content]

```typescript
// lib/story/content.ts
export interface StoryCheckpoint {
  id: string
  title: string
  narrative: string
  celebrationEmoji?: string
}

export interface StoryThemeContent {
  themeName: string
  intro: StoryCheckpoint
  checkpoints: StoryCheckpoint[]
  finale: StoryCheckpoint
}

export const STORY_THEMES: Record<string, StoryThemeContent> = {
  space: { /* ... */ },
  treasure: { /* future */ },
  fantasy: { /* future */ }
}

export function getStoryContent(theme: string = 'space'): StoryThemeContent {
  return STORY_THEMES[theme] || STORY_THEMES.space
}

export function getCheckpointNarrative(theme: string, checkpoint: number): string {
  const content = getStoryContent(theme)
  return content.checkpoints[checkpoint]?.narrative || ''
}
```

**Dynamic Content with Templates:**
```typescript
export function interpolateContent(template: string, vars: Record<string, any>): string {
  return template.replace(/\{(\w+)\}/g, (_, key) => vars[key] || '')
}

// Usage:
const narrative = interpolateContent(
  "Amazing! You've mastered {wordCount} words. Keep going!",
  { wordCount: 5 }
)
// => "Amazing! You've mastered 5 words. Keep going!"
```

**Writing Guidelines:**

1. **Reading Level**: Grade 1-2 (ages 5-7)
   - Short sentences (5-12 words)
   - Simple vocabulary
   - Active voice
   - Present tense preferred

2. **Tone**: Encouraging & Celebratory
   - Use exclamation marks sparingly but effectively
   - Action verbs: "mastered", "conquered", "achieved"
   - Direct address: "You", "Your"
   - Positive reinforcement: "Amazing!", "Incredible!", "Fantastic!"

3. **Inclusivity**:
   - Gender-neutral: "explorer", "hero", "champion", "adventurer"
   - Avoid: "he/she", "boy/girl", "his/her"
   - Universal themes: space, adventure, exploration
   - Culturally neutral imagery

4. **Learning Integration**:
   - Reference word mastery explicitly
   - Connect progress to narrative advancement
   - Make learning the core mechanic of the story
   - Example: "Each word you master powers your rocket ship!"

**Content Length Guidelines:**
- **Intro**: 2-3 sentences (setup + motivation)
- **Checkpoints**: 2 sentences (celebration + encouragement)
- **Finale**: 2-3 sentences (major celebration + next steps)
- **Maximum**: 60 words per segment

**Example Narratives:**

**Space Theme (Recommended):**
```typescript
{
  intro: "Welcome, Space Explorer! Your mission is to collect word treasures across the galaxy. Each word you master will reveal new planets to explore!",
  checkpoint1: "Amazing work! You've landed on the Moon and mastered your first set of words. The stars are calling ‚Äì keep going!",
  checkpoint2: "Incredible! You've reached Mars with 10 words mastered. The asteroid belt is just ahead ‚Äì you're halfway to your goal!",
  checkpoint3: "You're unstoppable! Jupiter's moons are behind you, and you've conquered 15 words. The final frontier awaits!",
  finale: "Mission Complete, Space Explorer! You've traveled across the galaxy and mastered all your words. You're a true Word Champion! Ready for your next adventure?"
}
```

**Treasure Theme (Alternative):**
```typescript
{
  intro: "Ahoy, Treasure Hunter! A mysterious map has appeared, leading to hidden word treasures. Spell each word correctly to reveal the next clue!",
  checkpoint1: "Brilliant! You've found the first treasure chest on the beach. Five words collected! The map now shows a secret cave...",
  checkpoint2: "Fantastic! The cave revealed amazing treasures, and you've mastered 10 words. The map points to a hidden island!",
  checkpoint3: "Extraordinary! The island's treasures are yours, with 15 words conquered. The final treasure awaits at Skull Rock!",
  finale: "Treasure Complete! You've found all the word treasures and filled your chest. You're a Master Treasure Hunter! What adventure awaits next?"
}
```

### Dependencies

**Required:**
- Story 6.1 (Story Theme Assets) - Theme must be selected first
- Story 6.2 (Story Progress Machine) - Content will be displayed at checkpoints

**Enables:**
- Story 6.4 (Integrate Checkpoints) - Will use this narrative content
- Story 6.5 (Intro/Finale Screens) - Will display this content

### Testing

**Testing Framework:** Vitest
**Test Location:** `/lib/story/content.test.ts`

**Test Scenarios:**
```typescript
import { describe, it, expect } from 'vitest'
import {
  STORY_THEMES,
  getStoryContent,
  getCheckpointNarrative,
  interpolateContent
} from './content'

describe('Story Content', () => {
  it('has complete content for space theme', () => {
    const space = STORY_THEMES.space

    expect(space.intro).toBeDefined()
    expect(space.intro.narrative).toBeTruthy()
    expect(space.checkpoints).toHaveLength(3)
    expect(space.finale).toBeDefined()
  })

  it('retrieves content by theme', () => {
    const content = getStoryContent('space')
    expect(content.themeName).toBe('Space Adventure')
  })

  it('returns default theme for unknown theme', () => {
    const content = getStoryContent('unknown-theme')
    expect(content).toBeDefined()
  })

  it('retrieves checkpoint narrative by index', () => {
    const narrative = getCheckpointNarrative('space', 0)
    expect(narrative).toContain('Moon')
  })

  it('interpolates template variables', () => {
    const result = interpolateContent(
      "You've mastered {wordCount} words!",
      { wordCount: 5 }
    )
    expect(result).toBe("You've mastered 5 words!")
  })

  it('content avoids gender-specific pronouns', () => {
    const space = STORY_THEMES.space
    const allContent = [
      space.intro.narrative,
      ...space.checkpoints.map(c => c.narrative),
      space.finale.narrative
    ].join(' ')

    expect(allContent).not.toMatch(/\b(he|she|him|her|his|hers|boy|girl)\b/i)
  })

  it('all narratives are age-appropriate length', () => {
    const space = STORY_THEMES.space
    const allNarratives = [
      space.intro.narrative,
      ...space.checkpoints.map(c => c.narrative),
      space.finale.narrative
    ]

    allNarratives.forEach(narrative => {
      const wordCount = narrative.split(/\s+/).length
      expect(wordCount).toBeLessThanOrEqual(60)
      expect(wordCount).toBeGreaterThan(10)
    })
  })
})
```

**Run Tests:**
```bash
npm run test
```

### Content Review Checklist

Before finalizing content, review:

- [ ] Reading level appropriate for ages 5-10
- [ ] No gender-specific language
- [ ] Positive, encouraging tone throughout
- [ ] References learning progress explicitly
- [ ] Culturally inclusive and neutral
- [ ] Each segment 10-60 words
- [ ] Exclamation marks used but not excessive
- [ ] Narrative flows logically from start to finish
- [ ] Finale provides clear sense of completion
- [ ] Content is easy to edit and extend

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-20 | 1.0 | Initial story created | Sarah (PO) |

## Dev Agent Record

### Agent Model Used

_To be populated by dev agent_

### Debug Log References

_To be populated by dev agent_

### Completion Notes List

_To be populated by dev agent_

### File List

_To be populated by dev agent_

## QA Results

_To be populated by QA agent_
